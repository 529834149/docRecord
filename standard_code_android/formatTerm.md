# 格式术语
    

### 大括号

- ##### 使用大括号(即使是可选的)

	大括号与if, else, for, do, while语句一起使用，即使只有一条语句(或是空)，也应该把大括号写上。

- ##### 非空块：K & R 风格

	对于非空块和块状结构，大括号遵循 Kernighan 和 Ritchie 风格 (Egyptian brackets):

	1. 左大括号前不换行
	2. 左大括号后换行
	3. 右大括号前换行
	4. 如果右大括号是一个语句、函数体或类的终止，则右大括号后换行; 否则不换行。

	例如，如果右大括号后面是else或逗号，则不换行。

	示例：   

	```
	return new MyClass() {    
	@Override public void method() {        
	if (condition()) {
		try {
			something();
		} catch (ProblemException e) {
			recover();
		}
	}
	}
	};
	```

- ##### 空块：可以用简洁版本

	一个空的块状结构里什么也不包含，大括号可以简洁地写成{}，不需要换行。

	例外：如果它是一个多块语句的一部分(if/else 或 try/catch/finally) ，即使大括号内没内容，右大括号也要换行。

	示例：

	```
	void doNothing() {}
	```
		
### 块缩进：4个空格

	每当开始一个新的块，缩进增加4个空格，当块结束时，缩进返回先前的缩进级别。缩进级别适用于代码和注释。
	
	示例：
	
	``` 
	public static void main(String[] args) {
		int i = 0;
		i = i + 1;
		System.out.println(i);
	}
	```
	
### 一行一个语句
	
	每个语句后要换行。
		
### 列限制：80或100
	一个项目可以选择一行80个字符或100个字符的列限制，除了下述例外，任何一行如果超过这个字符数限制，必须自动换行。

	例外：

	不可能满足列限制的行(例如，Javadoc中的一个长URL，或是一个长的JSNI方法参考)。
	package和import语句。
	注释中那些可能被剪切并粘贴到shell中的命令行。
	
### 自动换行

- ##### 从哪里断开
	
	自动换行的基本准则是：更倾向于在更高的语法级别处断开。

	1. 如果在非赋值运算符处断开，那么在该符号前断开(比如+，它将位于下一行)。
	2. 这条规则也适用于以下”类运算符”符号：点分隔符(.)，类型界限中的 &（)，catch 块中的管道符号(catch (FooException | BarException e)
	3. 如果在赋值运算符处断开，通常的做法是在该符号后断开(比如=，它与前面的内容留在同一行)。这条规则也适用于foreach语句中的分号。
	4. 方法名或构造函数名与左括号留在同一行。
	5. 逗号(,)与其前面的内容留在同一行。
		
- ##### 自动换行时缩进至少+8个空格
	自动换行时，第一行后的每一行至少比第一行多缩进8个空格。当存在连续自动换行时，缩进可能会多缩进不只8个空格(语法元素存在多级时)。一般而言，两个连续行使用相同的缩进当且仅当它们开始于同级语法元素。
		
### 空白

- ##### 垂直空白
	
	以下情况需要使用一个空行：

	1. 类内连续的成员之间：字段，构造函数，方法，嵌套类，静态初始化块，实例初始化块。 例外： 两个连续字段之间的空行是可选的，用于字段的空行主要用来对字段进行逻辑分组。
	2. 在函数体内，语句的逻辑分组间使用空行。
	3. 类内的第一个成员前或最后一个成员后的空行是可选的。
	4. 要满足本文档中其他节的空行要求(比如3.3节：import语句)
	5. 多个连续的空行是允许的，但没有必要这样做(我们也不鼓励这样做)。
		
- ##### 水平空白

	除了语言需求和其它规则，并且除了文字，注释和Javadoc用到单个空格，单个ASCII空格也出现在以下几个地方：

	1. 分隔任何保留字与紧随其后的左括号(()(如if, for catch等)。
	2. 分隔任何保留字与其前面的右大括号(})(如else, catch)。
	3. 在任何左大括号前({)，两个例外：
		o @SomeAnnotation({a, b})(不使用空格)。
		o String[][] x = foo;(大括号间没有空格，见下面的Note)。
	4. 在任何二元或三元运算符的两侧。这也适用于以下”类运算符”符号：
		o 类型界限中的&()。
		o catch块中的管道符号(catch (FooException | BarException e)。
		o foreach语句中的分号。
	5. 在, : ;及右括号())后
	6. 如果在一条语句后做注释，则双斜杠(//)两边都要空格。这里可以允许多个空格，但没有必要。
	7. 类型和变量之间：List list。
	8. 数组初始化中，大括号内的空格是可选的，即new int[] {5, 6}和new int[] { 5, 6 }都是可以的。
		
### 用小括号来限定组：推荐
	除非作者和reviewer都认为去掉小括号也不会使代码被误解，或是去掉小括号能让代码更易于阅读，否则我们不应该去掉小括号。

	我们没有理由假设读者能记住整个Java运算符优先级表。
	
### 具体结构

- ##### 枚举类
	
	枚举常量间用逗号隔开，换行可选。

	没有方法和文档的枚举类可写成数组初始化的格式：
	
	```
	private enum Suit { 
		CLUBS, 
		HEARTS, 
		SPADES, 
		DIAMONDS
	}
	```
	
	由于枚举类也是一个类，因此所有适用于其它类的格式规则也适用于枚举类。
		
- ##### 变量声明
	
	1. 不要使用组合声明，比如int a, b;
	2. 不要在一个代码块的开头把局部变量一次性都声明了，而是在第一次需要使用它时才声明。 局部变量在声明时最好就进行初始化，或者声明后尽快进行初始化。
	3. 数组初始化可以写成块状结构，比如:
	```
	new int[] {
		0, 1, 2, 3 
	}
	new int[] {
		0,
		1,
		2,
		3
	}
	new int[] {
		0, 1,
		2, 3
	}
	new int[]
		{0, 1, 2, 3}
	```
	4. 中括号是类型的一部分：String[] args， 而非 String args[]。
	5. 其它块状结构一致，switch块中的内容缩进为2个空格。每个switch标签后新起一行，再缩进2个空格，写下一条或多条语句。
	6. 在一个switch块内，每个语句组要么通过break, continue, return或抛出异常来终止，要么通过一条注释来说明程序将继续执行到下一个语句组， 任何能表达这个意思的注释都是OK的(典型的是用// fall through)。这个特殊的注释并不需要在最后一个语句组(一般是default)中出现。

	示例：
	```
	switch (input) {
		case 1:
		case 2:
			prepareOneOrTwo();// fall through
		case 3:
			handleOneTwoOrThree();
			break;
		default:
			handleLargeNumber(input);
	}
	```
	7. 每个switch语句都包含一个default语句组，即使它什么代码也不包含。
		
- ##### 注解(Annotations)
	
	注解紧跟在文档块后面，应用于类、方法和构造函数，一个注解独占一行。这些换行不属于自动换行，因此缩进级别不变。

	例如：
	```
	@Nullable public String getNameIfPresent() { … }
	```
	例外：单个的注解可以和签名的第一行出现在同一行。

	例如：
	```
	@Override public int hashCode() { … }
	```
	应用于字段的注解紧随文档块出现，应用于字段的多个注解允许与字段出现在同一行。

	例如：
	```
	@Partial @Mock DataLoader loader;
	```
	参数和局部变量注解没有特定规则。
		
- ##### 注释
	
	块注释与其周围的代码在同一缩进级别。它们可以是/ … /风格，也可以是// …风格。对于多行的/ … /注释，后续行必须从开始， 并且与前一行的对齐。

	以下示例注释都是OK的。
	```
	/** This is // And so /* Or you can
	 *  okay. // is this. * even do this. */
	 */
	``` 
	注释不要封闭在由星号或其它字符绘制的框架里。
		
- ##### Modifiers
	
	类和成员的modifiers如果存在，则按Java语言规范中推荐的顺序出现。

	public protected private abstract static final transient Volatile synchronized native strictfp